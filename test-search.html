<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ø–æ–∏—Å–∫–∞ - –ì–æ—Å–ó–∞–∫—É–ø–∫–∏</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .result { margin: 10px 0; padding: 10px; background: #f5f5f5; border-radius: 4px; }
        .error { color: red; }
        .success { color: green; }
        button { padding: 10px 20px; margin: 5px; background: #007AFF; color: white; border: none; border-radius: 4px; cursor: pointer; }
        input { padding: 8px; margin: 5px; border: 1px solid #ddd; border-radius: 4px; width: 200px; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç –ø–æ–∏—Å–∫–∞ –ì–æ—Å–ó–∞–∫—É–ø–∫–∏</h1>
    
    <div class="test-section">
        <h3>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö</h3>
        <button onclick="testDataLoading()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö</button>
        <div id="dataResult"></div>
    </div>
    
    <div class="test-section">
        <h3>2. –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫</h3>
        <input type="text" id="searchInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞">
        <button onclick="testSimpleSearch()">–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫</button>
        <div id="searchResult"></div>
    </div>
    
    <div class="test-section">
        <h3>3. –ü–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏</h3>
        <select id="categoryFilter">
            <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
            <option value="–¢–æ–≤–∞—Ä—ã">–¢–æ–≤–∞—Ä—ã</option>
            <option value="–£—Å–ª—É–≥–∏">–£—Å–ª—É–≥–∏</option>
            <option value="–†–∞–±–æ—Ç—ã">–†–∞–±–æ—Ç—ã</option>
        </select>
        <button onclick="testFilteredSearch()">–ü–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏</button>
        <div id="filteredResult"></div>
    </div>
    
    <div class="test-section">
        <h3>4. –¢–µ—Å—Ç –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π</h3>
        <button onclick="runAllTests()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã</button>
        <div id="allTestsResult"></div>
    </div>

    <script src="https://shabunin24.github.io/zakupki/config.js"></script>
    <script src="https://shabunin24.github.io/zakupki/script.js"></script>
    
    <script>
        function testDataLoading() {
            const resultDiv = document.getElementById('dataResult');
            try {
                if (typeof mockPurchases !== 'undefined') {
                    resultDiv.innerHTML = `<div class="result success">‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã: ${mockPurchases.length} –∑–∞–∫—É–ø–æ–∫</div>`;
                    console.log('Mock purchases:', mockPurchases);
                } else {
                    resultDiv.innerHTML = `<div class="result error">‚ùå mockPurchases –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω</div>`;
                }
            } catch (e) {
                resultDiv.innerHTML = `<div class="result error">‚ùå –û—à–∏–±–∫–∞: ${e.message}</div>`;
            }
        }
        
        function testSimpleSearch() {
            const resultDiv = document.getElementById('searchResult');
            const searchText = document.getElementById('searchInput').value;
            
            try {
                if (typeof searchPurchases === 'function') {
                    const results = searchPurchases(searchText);
                    resultDiv.innerHTML = `<div class="result success">‚úÖ –ü–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω: –Ω–∞–π–¥–µ–Ω–æ ${results.length} —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</div>`;
                    console.log('Search results:', results);
                } else {
                    resultDiv.innerHTML = `<div class="result error">‚ùå –§—É–Ω–∫—Ü–∏—è searchPurchases –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</div>`;
                }
            } catch (e) {
                resultDiv.innerHTML = `<div class="result error">‚ùå –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞: ${e.message}</div>`;
            }
        }
        
        function testFilteredSearch() {
            const resultDiv = document.getElementById('filteredResult');
            const category = document.getElementById('categoryFilter').value;
            
            try {
                if (typeof searchPurchases === 'function') {
                    const filters = category ? { category: category } : {};
                    const results = searchPurchases('', filters);
                    resultDiv.innerHTML = `<div class="result success">‚úÖ –§–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫: –Ω–∞–π–¥–µ–Ω–æ ${results.length} —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</div>`;
                    console.log('Filtered results:', results);
                } else {
                    resultDiv.innerHTML = `<div class="result error">‚ùå –§—É–Ω–∫—Ü–∏—è searchPurchases –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</div>`;
                }
            } catch (e) {
                resultDiv.innerHTML = `<div class="result error">‚ùå –û—à–∏–±–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞: ${e.message}</div>`;
            }
        }
        
        function runAllTests() {
            const resultDiv = document.getElementById('allTestsResult');
            let results = [];
            
            try {
                // –¢–µ—Å—Ç 1: –î–∞–Ω–Ω—ã–µ
                if (typeof mockPurchases !== 'undefined') {
                    results.push('‚úÖ mockPurchases –∑–∞–≥—Ä—É–∂–µ–Ω');
                } else {
                    results.push('‚ùå mockPurchases –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                }
                
                // –¢–µ—Å—Ç 2: –§—É–Ω–∫—Ü–∏–∏
                if (typeof searchPurchases === 'function') {
                    results.push('‚úÖ searchPurchases –¥–æ—Å—Ç—É–ø–Ω–∞');
                } else {
                    results.push('‚ùå searchPurchases –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
                }
                
                if (typeof performAdvancedSearch === 'function') {
                    results.push('‚úÖ performAdvancedSearch –¥–æ—Å—Ç—É–ø–Ω–∞');
                } else {
                    results.push('‚ùå performAdvancedSearch –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
                }
                
                if (typeof getCurrentFilters === 'function') {
                    results.push('‚úÖ getCurrentFilters –¥–æ—Å—Ç—É–ø–Ω–∞');
                } else {
                    results.push('‚ùå getCurrentFilters –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
                }
                
                // –¢–µ—Å—Ç 3: –ü–æ–∏—Å–∫
                try {
                    const searchResults = searchPurchases('–∫–æ–º–ø—å—é—Ç–µ—Ä');
                    results.push(`‚úÖ –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç: ${searchResults.length} —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤`);
                } catch (e) {
                    results.push(`‚ùå –ü–æ–∏—Å–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: ${e.message}`);
                }
                
                resultDiv.innerHTML = results.map(r => `<div class="result">${r}</div>`).join('');
                
            } catch (e) {
                resultDiv.innerHTML = `<div class="result error">‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: ${e.message}</div>`;
            }
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π...');
            setTimeout(() => {
                testDataLoading();
            }, 1000);
        });
    </script>
</body>
</html>
