<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–æ—Å–ó–∞–∫—É–ø–∫–∏ - Telegram Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            padding: 30px 0;
            margin: -20px -20px 30px -20px;
            border-radius: 0 0 20px 20px;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 300;
        }
        
        /* Telegram Status */
        .telegram-status {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .status-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .status-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 10px;
        }
        
        .status-description {
            color: #64748b;
            margin-bottom: 20px;
        }
        
        /* Search Section */
        .search-section {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .search-form {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .search-input {
            flex: 1;
            min-width: 300px;
            padding: 16px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #f8fafc;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #3b82f6;
            background: white;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .search-button {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .search-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(5, 150, 105, 0.3);
        }
        
        /* Quick Actions */
        .quick-actions {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .actions-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .action-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }
        
        .action-card:hover {
            border-color: #3b82f6;
            background: #eff6ff;
            transform: translateY(-2px);
        }
        
        .action-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .action-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 8px;
        }
        
        .action-description {
            font-size: 0.9rem;
            color: #64748b;
        }
        
        /* Features */
        .features {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .features-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 8px;
        }
        
        .feature-icon {
            font-size: 1.5rem;
            color: #3b82f6;
        }
        
        .feature-text {
            font-size: 0.9rem;
            color: #475569;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header {
                margin: -15px -15px 20px -15px;
                border-radius: 0 0 15px 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .search-form {
                flex-direction: column;
            }
            
            .search-input {
                min-width: auto;
            }
            
            .actions-grid {
                grid-template-columns: 1fr;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Telegram WebApp Styles */
        .telegram-webapp {
            background: var(--tg-theme-bg-color, #f8fafc);
            color: var(--tg-theme-text-color, #1e293b);
        }
        
        .telegram-webapp .header {
            background: var(--tg-theme-button-color, linear-gradient(135deg, #1e40af 0%, #3b82f6 100%));
        }
        
        .telegram-webapp .search-button {
            background: var(--tg-theme-button-color, linear-gradient(135deg, #059669 0%, #10b981 100%));
        }
        
        .telegram-webapp .action-card:hover {
            border-color: var(--tg-theme-button-color, #3b82f6);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>üèõÔ∏è –ì–æ—Å–ó–∞–∫—É–ø–∫–∏</h1>
                <p>–ü–æ–∏—Å–∫ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–∫—É–ø–æ–∫ –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏</p>
            </div>
        </div>

        <!-- Telegram Status -->
        <div class="telegram-status" id="telegramStatus">
            <div class="status-icon">üì±</div>
            <h2 class="status-title">Telegram Mini App</h2>
            <p class="status-description">–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram...</p>
        </div>

        <!-- Search Section -->
        <div class="search-section">
            <form class="search-form" id="searchForm">
                <input 
                    type="text" 
                    class="search-input" 
                    id="searchInput"
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–∫—É–ø–∫–∏, —Ç–æ–≤–∞—Ä–∞ –∏–ª–∏ —É—Å–ª—É–≥–∏..."
                    autocomplete="off"
                >
                <button type="submit" class="search-button">
                    üîç –ù–∞–π—Ç–∏ –∑–∞–∫—É–ø–∫–∏
                </button>
            </form>
            
            <div class="search-examples">
                <p style="color: #64748b; font-size: 14px; margin: 0; text-align: center;">
                    üí° –ü—Ä–∏–º–µ—Ä—ã: "–±—É–º–∞–≥–∞ –ê4 –æ—Ñ–∏—Å–Ω–∞—è", "—Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –¥–æ—Ä–æ–≥", "–º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ"
                </p>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <h3 class="actions-title">üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
            <div class="actions-grid">
                <a href="index.html" class="action-card">
                    <div class="action-icon">üîç</div>
                    <div class="action-title">–ü–æ–ª–Ω—ã–π –ø–æ–∏—Å–∫</div>
                    <div class="action-description">–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</div>
                </a>
                
                <a href="favorites.html" class="action-card">
                    <div class="action-icon">‚≠ê</div>
                    <div class="action-title">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</div>
                    <div class="action-description">–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∑–∞–∫—É–ø–∫–∏</div>
                </a>
                
                <a href="purchase-detail.html" class="action-card">
                    <div class="action-icon">üìã</div>
                    <div class="action-title">–î–µ—Ç–∞–ª–∏ –∑–∞–∫—É–ø–∫–∏</div>
                    <div class="action-description">–ü—Ä–∏–º–µ—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</div>
                </a>
                
                <a href="#" class="action-card" onclick="showNotification('üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏!')">
                    <div class="action-icon">üîî</div>
                    <div class="action-title">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
                    <div class="action-description">–û –Ω–æ–≤—ã—Ö –∑–∞–∫—É–ø–∫–∞—Ö</div>
                </a>
            </div>
        </div>

        <!-- Features -->
        <div class="features">
            <h3 class="features-title">‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h3>
            <div class="features-grid">
                <div class="feature-item">
                    <div class="feature-icon">üîç</div>
                    <div class="feature-text">–ü–æ–∏—Å–∫ –ø–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º—É —è–∑—ã–∫—É</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üìç</div>
                    <div class="feature-text">–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üí∞</div>
                    <div class="feature-text">–§–∏–ª—å—Ç—Ä—ã –ø–æ —Ü–µ–Ω–µ</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üìÖ</div>
                    <div class="feature-text">–§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">‚≠ê</div>
                    <div class="feature-text">–°–∏—Å—Ç–µ–º–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üì±</div>
                    <div class="feature-text">–ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Check if running in Telegram WebApp
            if (window.Telegram && window.Telegram.WebApp) {
                document.body.classList.add('telegram-webapp');
                const tg = window.Telegram.WebApp;
                tg.ready();
                tg.expand();
                
                // Update status
                updateTelegramStatus(tg);
                
                console.log('Telegram WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω:', tg);
            } else {
                // Not in Telegram
                updateTelegramStatus(null);
            }

            // Setup event listeners
            setupEventListeners();
        }

        function updateTelegramStatus(tg) {
            const statusElement = document.getElementById('telegramStatus');
            
            if (tg) {
                statusElement.innerHTML = `
                    <div class="status-icon">‚úÖ</div>
                    <h2 class="status-title">–ó–∞–ø—É—â–µ–Ω–æ –≤ Telegram!</h2>
                    <p class="status-description">–í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Telegram WebApp</p>
                `;
                
                // Show user info if available
                if (tg.initDataUnsafe?.user) {
                    const user = tg.initDataUnsafe.user;
                    statusElement.innerHTML += `
                        <div style="margin-top: 15px; padding: 15px; background: #f0f9ff; border-radius: 8px; border: 1px solid #0ea5e9;">
                            <p style="margin: 0; color: #0c4a6e; font-size: 14px;">
                                <strong>üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</strong> ${user.firstName || ''} ${user.lastName || ''}
                                ${user.username ? `(@${user.username})` : ''}
                            </p>
                        </div>
                    `;
                }
            } else {
                statusElement.innerHTML = `
                    <div class="status-icon">üñ•Ô∏è</div>
                    <h2 class="status-title">–í–µ—Ä—Å–∏—è –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞</h2>
                    <p class="status-description">–≠—Ç–æ –≤–µ—Ä—Å–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                    <div style="margin-top: 15px; padding: 15px; background: #fef3c7; border-radius: 8px; border: 1px solid #f59e0b;">
                        <p style="margin: 0; color: #92400e; font-size: 14px;">
                            <strong>üì± –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Telegram:</strong><br>
                            –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ—Ç–∞ @oborotn_bot –∏ –Ω–∞–∂–º–∏—Ç–µ "üöÄ –û—Ç–∫—Ä—ã—Ç—å –ì–æ—Å–ó–∞–∫—É–ø–∫–∏"
                        </p>
                    </div>
                `;
            }
        }

        function setupEventListeners() {
            // Search form
            document.getElementById('searchForm').addEventListener('submit', function(e) {
                e.preventDefault();
                performSearch();
            });
        }

        function performSearch() {
            const searchQuery = document.getElementById('searchInput').value.trim();
            if (!searchQuery) return;

            // Show notification
            showNotification(`üîç –ü–æ–∏—Å–∫: "${searchQuery}" - –∏—â–µ–º –∑–∞–∫—É–ø–∫–∏...`);
            
            // Perform actual search
            searchPurchases(searchQuery);
        }
        
        // Mock data for demonstration
        const mockPurchases = [
            {
                id: 1,
                title: "–ü–æ—Å—Ç–∞–≤–∫–∞ –∫–∞–Ω—Ü–µ–ª—è—Ä—Å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—á—Ä–µ–∂–¥–µ–Ω–∏–π",
                status: "published",
                price: 2500000,
                region: "–ú–æ—Å–∫–≤–∞",
                customer: "–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≥. –ú–æ—Å–∫–≤—ã",
                deadline: "2024-12-31",
                method: "electronic_auction",
                description: "–ü–æ—Å—Ç–∞–≤–∫–∞ –±—É–º–∞–≥–∏ –ê4, —Ä—É—á–µ–∫, –∫–∞—Ä–∞–Ω–¥–∞—à–µ–π –∏ –¥—Ä—É–≥–∏—Ö –∫–∞–Ω—Ü–µ–ª—è—Ä—Å–∫–∏—Ö –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–µ–π"
            },
            {
                id: 2,
                title: "–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω–æ–π –¥–æ—Ä–æ–≥–∏ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è",
                status: "bidding",
                price: 150000000,
                region: "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π",
                customer: "–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–æ–≥–æ –∫—Ä–∞—è",
                deadline: "2024-11-15",
                method: "tender",
                description: "–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –¥–æ—Ä–æ–≥–∏ –ø—Ä–æ—Ç—è–∂–µ–Ω–Ω–æ—Å—Ç—å—é 15 –∫–º —Å –º–æ—Å—Ç–æ–≤—ã–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏"
            },
            {
                id: 3,
                title: "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞",
                status: "evaluation",
                price: 8500000,
                region: "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥",
                customer: "–ö–æ–º–∏—Ç–µ—Ç –ø–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ —Å–≤—è–∑–∏",
                deadline: "2024-10-20",
                method: "request_proposals",
                description: "–°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞ –¥–ª—è –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–æ–≤"
            },
            {
                id: 4,
                title: "–ü–æ—Å—Ç–∞–≤–∫–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –¥–ª—è –≥–æ—Ä–æ–¥—Å–∫–æ–π –±–æ–ª—å–Ω–∏—Ü—ã",
                status: "awarded",
                price: 45000000,
                region: "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫",
                customer: "–ì–æ—Ä–æ–¥—Å–∫–∞—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –±–æ–ª—å–Ω–∏—Ü–∞ ‚Ññ1",
                deadline: "2024-09-30",
                method: "electronic_auction",
                description: "–ü–æ—Å—Ç–∞–≤–∫–∞ —Ä–µ–Ω—Ç–≥–µ–Ω–æ–≤—Å–∫–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è, –£–ó–ò –∞–ø–ø–∞—Ä–∞—Ç–æ–≤ –∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è"
            },
            {
                id: 5,
                title: "–û–∫–∞–∑–∞–Ω–∏–µ —É—Å–ª—É–≥ –ø–æ —É–±–æ—Ä–∫–µ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏",
                status: "published",
                price: 1200000,
                region: "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥",
                customer: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –õ–µ–Ω–∏–Ω—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞",
                deadline: "2024-12-15",
                method: "request_quotes",
                description: "–£–±–æ—Ä–∫–∞ —É–ª–∏—Ü, –≤—ã–≤–æ–∑ –º—É—Å–æ—Ä–∞, —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∑–µ–ª–µ–Ω—ã—Ö –Ω–∞—Å–∞–∂–¥–µ–Ω–∏–π"
            }
        ];
        
        function searchPurchases(query) {
            // Filter purchases based on search query
            const filtered = mockPurchases.filter(purchase => 
                purchase.title.toLowerCase().includes(query.toLowerCase()) ||
                purchase.description.toLowerCase().includes(query.toLowerCase()) ||
                purchase.region.toLowerCase().includes(query.toLowerCase()) ||
                purchase.customer.toLowerCase().includes(query.toLowerCase())
            );
            
            // Show results
            showSearchResults(filtered, query);
        }
        
        function showSearchResults(purchases, query) {
            // Create results section
            const resultsHTML = createResultsHTML(purchases, query);
            
            // Replace search section with results
            const searchSection = document.querySelector('.search-section');
            searchSection.innerHTML = resultsHTML;
            
            // Add back button
            const backButton = document.createElement('div');
            backButton.innerHTML = `
                <button onclick="showSearchForm()" style="
                    background: #3b82f6;
                    color: white;
                    border: none;
                    padding: 12px 24px;
                    border-radius: 8px;
                    cursor: pointer;
                    font-size: 14px;
                    margin-top: 20px;
                ">
                    ‚Üê –ù–æ–≤—ã–π –ø–æ–∏—Å–∫
                </button>
            `;
            searchSection.appendChild(backButton);
        }
        
        function createResultsHTML(purchases, query) {
            if (purchases.length === 0) {
                return `
                    <div style="text-align: center; padding: 40px;">
                        <div style="font-size: 3rem; margin-bottom: 20px;">üîç</div>
                        <h3 style="color: #1e293b; margin-bottom: 10px;">–ó–∞–∫—É–ø–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p style="color: #64748b;">–ü–æ –∑–∞–ø—Ä–æ—Å—É "${query}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
                        <p style="color: #64748b; font-size: 14px; margin-top: 20px;">
                            –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
                        </p>
                    </div>
                `;
            }
            
            let resultsHTML = `
                <h3 style="color: #1e293b; margin-bottom: 20px; text-align: center;">
                    üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: "${query}"
                </h3>
                <p style="color: #64748b; text-align: center; margin-bottom: 30px;">
                    –ù–∞–π–¥–µ–Ω–æ –∑–∞–∫—É–ø–æ–∫: ${purchases.length}
                </p>
                <div style="display: grid; gap: 20px;">
            `;
            
            purchases.forEach(purchase => {
                resultsHTML += createPurchaseCardHTML(purchase);
            });
            
            resultsHTML += '</div>';
            return resultsHTML;
        }
        
        function createPurchaseCardHTML(purchase) {
            const statusClass = `status-${purchase.status}`;
            const statusText = getStatusText(purchase.status);
            const methodText = getMethodText(purchase.method);
            const priceText = formatPrice(purchase.price);
            
            return `
                <div style="
                    background: white;
                    border: 1px solid #e2e8f0;
                    border-radius: 12px;
                    padding: 20px;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                ">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                        <h4 style="
                            font-size: 1.1rem;
                            font-weight: 600;
                            color: #1e293b;
                            line-height: 1.4;
                            margin: 0;
                            flex: 1;
                            margin-right: 15px;
                        ">${purchase.title}</h4>
                        <span style="
                            padding: 6px 12px;
                            border-radius: 20px;
                            font-size: 12px;
                            font-weight: 500;
                            white-space: nowrap;
                            ${getStatusStyle(purchase.status)}
                        ">${statusText}</span>
                    </div>
                    
                    <div style="
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                        gap: 15px;
                        margin-bottom: 15px;
                    ">
                        <div style="display: flex; align-items: center; gap: 8px; font-size: 14px; color: #64748b;">
                            <span>üìç</span>
                            <span>${purchase.region}</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; font-size: 14px; color: #64748b;">
                            <span>üè¢</span>
                            <span>${purchase.customer}</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; font-size: 14px; color: #64748b;">
                            <span>üìã</span>
                            <span>${methodText}</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; font-size: 14px; color: #64748b;">
                            <span>‚è∞</span>
                            <span>–î–æ ${formatDate(purchase.deadline)}</span>
                        </div>
                    </div>
                    
                    <div style="
                        font-size: 1.2rem;
                        font-weight: 700;
                        color: #059669;
                        margin-bottom: 15px;
                    ">${priceText}</div>
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button onclick="addToFavorites(${purchase.id})" style="
                            background: #f1f5f9;
                            color: #64748b;
                            border: none;
                            padding: 8px 16px;
                            border-radius: 8px;
                            cursor: pointer;
                            font-size: 14px;
                        ">‚≠ê –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
                        <button onclick="showPurchaseDetails(${purchase.id})" style="
                            background: #3b82f6;
                            color: white;
                            border: none;
                            padding: 8px 16px;
                            border-radius: 8px;
                            cursor: pointer;
                            font-size: 14px;
                        ">üìã –ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                    </div>
                </div>
            `;
        }
        
        function getStatusText(status) {
            const statuses = {
                'published': '–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ',
                'bidding': '–ü–æ–¥–∞—á–∞ –∑–∞—è–≤–æ–∫',
                'evaluation': '–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ',
                'awarded': '–ü—Ä–∏—Å—É–∂–¥–µ–Ω–æ',
                'completed': '–ó–∞–≤–µ—Ä—à–µ–Ω–æ',
                'cancelled': '–û—Ç–º–µ–Ω–µ–Ω–æ'
            };
            return statuses[status] || status;
        }
        
        function getMethodText(method) {
            const methods = {
                'electronic_auction': '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –∞—É–∫—Ü–∏–æ–Ω',
                'tender': '–û—Ç–∫—Ä—ã—Ç—ã–π –∫–æ–Ω–∫—É—Ä—Å',
                'request_quotes': '–ó–∞–ø—Ä–æ—Å –∫–æ—Ç–∏—Ä–æ–≤–æ–∫',
                'request_proposals': '–ó–∞–ø—Ä–æ—Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π'
            };
            return methods[method] || method;
        }
        
        function getStatusStyle(status) {
            const styles = {
                'published': 'background: #dbeafe; color: #1e40af;',
                'bidding': 'background: #fef3c7; color: #d97706;',
                'evaluation': 'background: #f3e8ff; color: #7c3aed;',
                'awarded': 'background: #d1fae5; color: #059669;',
                'completed': 'background: #d1fae5; color: #059669;',
                'cancelled': 'background: #fee2e2; color: #dc2626;'
            };
            return styles[status] || 'background: #f1f5f9; color: #64748b;';
        }
        
        function formatPrice(price) {
            if (price >= 1000000) {
                return `${(price / 1000000).toFixed(1)} –º–ª–Ω ‚ÇΩ`;
            } else if (price >= 1000) {
                return `${(price / 1000).toFixed(0)} —Ç—ã—Å ‚ÇΩ`;
            }
            return `${price} ‚ÇΩ`;
        }
        
        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('ru-RU');
        }
        
        function showSearchForm() {
            // Restore original search form
            const searchSection = document.querySelector('.search-section');
            searchSection.innerHTML = `
                <form class="search-form" id="searchForm">
                    <input 
                        type="text" 
                        class="search-input" 
                        id="searchInput"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–∫—É–ø–∫–∏, —Ç–æ–≤–∞—Ä–∞ –∏–ª–∏ —É—Å–ª—É–≥–∏..."
                        autocomplete="off"
                    >
                    <button type="submit" class="search-button">
                        üîç –ù–∞–π—Ç–∏ –∑–∞–∫—É–ø–∫–∏
                    </button>
                </form>
                
                <div class="search-examples">
                    <p style="color: #64748b; font-size: 14px; margin: 0; text-align: center;">
                        üí° –ü—Ä–∏–º–µ—Ä—ã: "–±—É–º–∞–≥–∞ –ê4 –æ—Ñ–∏—Å–Ω–∞—è", "—Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –¥–æ—Ä–æ–≥", "–º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ"
                    </p>
                </div>
            `;
            
            // Reattach event listener
            document.getElementById('searchForm').addEventListener('submit', function(e) {
                e.preventDefault();
                performSearch();
            });
        }
        
        function addToFavorites(purchaseId) {
            showNotification(`‚≠ê –ó–∞–∫—É–ø–∫–∞ ${purchaseId} –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ!`);
        }
        
        function showPurchaseDetails(purchaseId) {
            showNotification(`üìã –û—Ç–∫—Ä—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª–∏ –∑–∞–∫—É–ø–∫–∏ ${purchaseId}...`);
            // Redirect to detail page
            setTimeout(() => {
                window.location.href = `purchase-detail.html?id=${purchaseId}`;
            }, 1000);
        }

        function showNotification(message) {
            if (window.Telegram && window.Telegram.WebApp) {
                // Use Telegram notification
                const tg = window.Telegram.WebApp;
                tg.showAlert(message);
            } else {
                // Use browser alert
                alert(message);
            }
        }
    </script>
</body>
</html>
