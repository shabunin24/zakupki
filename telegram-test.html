<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç Telegram WebApp - –ì–æ—Å–ó–∞–∫—É–ø–∫–∏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: 'Inter', system-ui, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .status-card {
            background: var(--tg-theme-secondary-bg-color, #f3f4f6);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--tg-theme-hint-color, #e5e7eb);
        }
        
        .success { 
            background: var(--tg-theme-button-color, #10b981);
            color: var(--tg-theme-button-text-color, #ffffff);
        }
        
        .info { 
            background: var(--tg-theme-button-color, #3b82f6);
            color: var(--tg-theme-button-text-color, #ffffff);
        }
        
        .warning { 
            background: var(--tg-theme-button-color, #f59e0b);
            color: var(--tg-theme-button-text-color, #ffffff);
        }
        
        .button {
            background: var(--tg-theme-button-color, #3b82f6);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
            transition: opacity 0.2s;
        }
        
        .button:hover {
            opacity: 0.8;
        }
        
        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .user-info {
            background: var(--tg-theme-secondary-bg-color, #f3f4f6);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid var(--tg-theme-hint-color, #e5e7eb);
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß™ –¢–µ—Å—Ç Telegram WebApp</h1>
            <p>–ì–æ—Å–ó–∞–∫—É–ø–∫–∏ - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</p>
        </div>
        
        <div id="status" class="status-card info">
            <h3>üìä –°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏</h3>
            <p id="statusText">–ü—Ä–æ–≤–µ—Ä—è–µ–º Telegram WebApp...</p>
        </div>
        
        <div id="userInfo" class="user-info" style="display: none;">
            <h3>üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</h3>
            <div id="userDetails"></div>
        </div>
        
        <div class="status-card">
            <h3>üéØ –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h3>
            <ul class="feature-list">
                <li>üîç –ü–æ–∏—Å–∫ –∑–∞–∫—É–ø–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏</li>
                <li>‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ</li>
                <li>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫—É–ø–∫–∞—Ö</li>
                <li>üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö</li>
                <li>üåê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ï–ò–° –∏ –¥—Ä—É–≥–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏</li>
            </ul>
        </div>
        
        <div class="status-card">
            <h3>üß™ –¢–µ—Å—Ç–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏</h3>
            <button class="button" onclick="testMainButton()">–ü–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω—É—é –∫–Ω–æ–ø–∫—É</button>
            <button class="button" onclick="testBackButton()">–ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É –Ω–∞–∑–∞–¥</button>
            <button class="button" onclick="testExpand()">–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
            <button class="button" onclick="testClose()">–ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
        </div>
        
        <div class="status-card">
            <h3>üì± –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Telegram WebApp</h3>
            <div id="webappInfo"></div>
        </div>
    </div>

    <script>
        let webApp = null;
        let user = null;
        
        function updateStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            const statusText = document.getElementById('statusText');
            
            statusText.textContent = message;
            statusDiv.className = `status-card ${type}`;
        }
        
        function showUserInfo() {
            const userInfoDiv = document.getElementById('userInfo');
            const userDetailsDiv = document.getElementById('userDetails');
            
            if (user) {
                userDetailsDiv.innerHTML = `
                    <p><strong>–ò–º—è:</strong> ${user.firstName || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</p>
                    <p><strong>–§–∞–º–∏–ª–∏—è:</strong> ${user.lastName || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</p>
                    <p><strong>Username:</strong> @${user.username || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</p>
                    <p><strong>ID:</strong> ${user.id || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</p>
                    <p><strong>–Ø–∑—ã–∫:</strong> ${user.languageCode || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</p>
                `;
                userInfoDiv.style.display = 'block';
            }
        }
        
        function showWebAppInfo() {
            const webappInfoDiv = document.getElementById('webappInfo');
            
            if (webApp) {
                webappInfoDiv.innerHTML = `
                    <p><strong>–í–µ—Ä—Å–∏—è:</strong> ${webApp.version || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</p>
                    <p><strong>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:</strong> ${webApp.platform || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</p>
                    <p><strong>–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:</strong> ${webApp.colorScheme || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</p>
                    <p><strong>–¢–µ–º–∞:</strong> ${webApp.themeParams ? '–ù–∞—Å—Ç—Ä–æ–µ–Ω–∞' : '–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞'}</p>
                    <p><strong>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:</strong> ${webApp.initData ? '–ï—Å—Ç—å –¥–∞–Ω–Ω—ã–µ' : '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö'}</p>
                `;
            }
        }
        
        function testMainButton() {
            if (webApp) {
                webApp.MainButton.setText('–ù–∞–π—Ç–∏ –∑–∞–∫—É–ø–∫–∏');
                webApp.MainButton.onClick(() => {
                    alert('–ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞!');
                });
                webApp.MainButton.show();
                updateStatus('–ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑–∞–Ω–∞', 'success');
            }
        }
        
        function testBackButton() {
            if (webApp) {
                webApp.BackButton.onClick(() => {
                    alert('–ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ –Ω–∞–∂–∞—Ç–∞!');
                });
                webApp.BackButton.isVisible = true;
                updateStatus('–ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ –ø–æ–∫–∞–∑–∞–Ω–∞', 'success');
            }
        }
        
        function testExpand() {
            if (webApp) {
                webApp.expand();
                updateStatus('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ', 'success');
            }
        }
        
        function testClose() {
            if (webApp) {
                webApp.close();
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function initTelegramWebApp() {
            console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp...');
            
            if (window.Telegram && window.Telegram.WebApp) {
                webApp = window.Telegram.WebApp;
                console.log('Telegram WebApp –Ω–∞–π–¥–µ–Ω:', webApp);
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
                webApp.ready();
                webApp.expand();
                
                // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                if (webApp.initDataUnsafe && webApp.initDataUnsafe.user) {
                    user = webApp.initDataUnsafe.user;
                    console.log('–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', user);
                    showUserInfo();
                }
                
                // –ü–æ–∫–∞–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ WebApp
                showWebAppInfo();
                
                updateStatus('Telegram WebApp —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!', 'success');
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã
                document.documentElement.style.setProperty('--tg-theme-bg-color', webApp.themeParams.bg_color || '#ffffff');
                document.documentElement.style.setProperty('--tg-theme-text-color', webApp.themeParams.text_color || '#000000');
                document.documentElement.style.setProperty('--tg-theme-button-color', webApp.themeParams.button_color || '#3b82f6');
                document.documentElement.style.setProperty('--tg-theme-button-text-color', webApp.themeParams.button_text_color || '#ffffff');
                document.documentElement.style.setProperty('--tg-theme-secondary-bg-color', webApp.themeParams.secondary_bg_color || '#f3f4f6');
                document.documentElement.style.setProperty('--tg-theme-hint-color', webApp.themeParams.hint_color || '#9ca3af');
                
            } else {
                console.log('Telegram WebApp –Ω–µ –Ω–∞–π–¥–µ–Ω, –∑–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ –±—Ä–∞—É–∑–µ—Ä–∞');
                updateStatus('–ó–∞–ø—É—â–µ–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–Ω–µ –≤ Telegram)', 'warning');
                
                // –°–æ–∑–¥–∞–µ–º –º–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                webApp = {
                    MainButton: {
                        setText: (text) => console.log('MainButton.setText:', text),
                        onClick: (callback) => console.log('MainButton.onClick —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'),
                        show: () => console.log('MainButton –ø–æ–∫–∞–∑–∞–Ω–∞'),
                        hide: () => console.log('MainButton —Å–∫—Ä—ã—Ç–∞')
                    },
                    BackButton: {
                        onClick: (callback) => console.log('BackButton.onClick —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'),
                        isVisible: false
                    },
                    expand: () => console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ'),
                    close: () => console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ'),
                    ready: () => console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ'),
                    version: '6.9+',
                    platform: 'browser',
                    colorScheme: 'light',
                    themeParams: {},
                    initData: '',
                    initDataUnsafe: {}
                };
                
                showWebAppInfo();
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', initTelegramWebApp);
        
        // –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ Telegram WebApp
        if (window.Telegram && window.Telegram.WebApp) {
            initTelegramWebApp();
        }
    </script>
</body>
</html>
